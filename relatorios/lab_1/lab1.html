<!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <title>Respostas do Laborat&oacute;rio 1 - Captura de Imagem e V&iacute;deo</title>
            <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only],
.vscode-high-contrast:not(.vscode-high-contrast-light) img[src$=\#gh-light-mode-only],
.vscode-high-contrast-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

</style>
            
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
<style>
:root {
  --color-note: #0969da;
  --color-tip: #1a7f37;
  --color-warning: #9a6700;
  --color-severe: #bc4c00;
  --color-caution: #d1242f;
  --color-important: #8250df;
}

</style>
<style>
@media (prefers-color-scheme: dark) {
  :root {
    --color-note: #2f81f7;
    --color-tip: #3fb950;
    --color-warning: #d29922;
    --color-severe: #db6d28;
    --color-caution: #f85149;
    --color-important: #a371f7;
  }
}

</style>
<style>
.markdown-alert {
  padding: 0.5rem 1rem;
  margin-bottom: 16px;
  color: inherit;
  border-left: .25em solid #888;
}

.markdown-alert>:first-child {
  margin-top: 0
}

.markdown-alert>:last-child {
  margin-bottom: 0
}

.markdown-alert .markdown-alert-title {
  display: flex;
  font-weight: 500;
  align-items: center;
  line-height: 1
}

.markdown-alert .markdown-alert-title .octicon {
  margin-right: 0.5rem;
  display: inline-block;
  overflow: visible !important;
  vertical-align: text-bottom;
  fill: currentColor;
}

.markdown-alert.markdown-alert-note {
  border-left-color: var(--color-note);
}

.markdown-alert.markdown-alert-note .markdown-alert-title {
  color: var(--color-note);
}

.markdown-alert.markdown-alert-important {
  border-left-color: var(--color-important);
}

.markdown-alert.markdown-alert-important .markdown-alert-title {
  color: var(--color-important);
}

.markdown-alert.markdown-alert-warning {
  border-left-color: var(--color-warning);
}

.markdown-alert.markdown-alert-warning .markdown-alert-title {
  color: var(--color-warning);
}

.markdown-alert.markdown-alert-tip {
  border-left-color: var(--color-tip);
}

.markdown-alert.markdown-alert-tip .markdown-alert-title {
  color: var(--color-tip);
}

.markdown-alert.markdown-alert-caution {
  border-left-color: var(--color-caution);
}

.markdown-alert.markdown-alert-caution .markdown-alert-title {
  color: var(--color-caution);
}

</style>
        
        </head>
        <body class="vscode-body vscode-light">
            <h2 id="respostas-do-laboratório-1---captura-de-imagem-e-vídeo">Respostas do Laboratório 1 - Captura de Imagem e Vídeo</h2>
<p><strong>ESZA019 – Visão Computacional</strong></p>
<p><strong>Membros do grupo:</strong></p>
<blockquote>
<ul>
<li>Ian Victor Toniolo Silva - 11202020351</li>
<li>Cesar Seiji Maruyama - 11127015</li>
<li>Pedro Henrique Cardoso Silva - 11202021250</li>
<li>Guilherme de Sousa Santos - 11201921175</li>
</ul>
</blockquote>
<p><strong>Data de realização dos experimentos:</strong></p>
<ul>
<li>18/06/2025 (quarta-feira)</li>
</ul>
<p><strong>Data de publicação do relatório:</strong></p>
<ul>
<li>25/06/2025 (quarta-feira)</li>
</ul>
<h3 id="introdução">INTRODUÇÃO</h3>
<blockquote>
<p>O presente relatório tem como objetivo documentar as atividades realizadas no <strong>Laboratório 1 - Captura de Imagem e Vídeo</strong> da disciplina de Visão Computacional, abordando conceitos fundamentais relacionados à captura e manipulação de imagens e vídeos. Durante os experimentos, foram explorados aspectos práticos do uso da biblioteca OpenCV, como leitura, exibição, gravação e processamento básico de imagens e vídeos.</p>
</blockquote>
<blockquote>
<p>Neste relatório, serão descritas as etapas realizadas para manipular imagens e vídeos, incluindo a leitura de arquivos, captura de frames de câmeras, ajustes de parâmetros como taxa de quadros (FPS) e operações básicas de processamento. Além disso, serão apresentados os resultados obtidos, como fotos e vídeos capturados durante os experimentos realizados também em laboratório, e discutidas as observações feitas ao longo do processo.</p>
</blockquote>
<hr>
<h3 id="parte-1-processamento-básico-nas-imagens-e-vídeos">PARTE 1: Processamento Básico nas Imagens e Vídeos</h3>
<p><strong>(A) Leitura de imagem em arquivo</strong></p>
<blockquote>
<p>A janela não mostra a imagem colorida pois o segundo parâmetro da função <code>cv.imread()</code> foi atribuído o valor <code>0</code>, que representa ausência de cor no modo de leitura. Caso a atribuição seja <code>cv.IMREAD_COLOR_BGR</code> a imagem será convertida para os canais RBG (Red-Blue-Green) e a saída será uma imagem colorida.</p>
<p>Para corrigir isso, basta alterar a linha de leitura da imagem para:</p>
</blockquote>
<pre><code class="language-python">img = cv.imread(<span class="hljs-string">&#x27;messi5.jpg&#x27;</span>,cv.IMREAD_COLOR_BGR)
</code></pre>
<blockquote>
<p>Dessa forma, a imagem será lida corretamente com as cores e apresentada na janela da seguinte forma:</p>
</blockquote>
<p><img src="file:////home/ufabc/Documentos/projeto/cv2025.2-grupo8-icpg/relatorios/lab_1/messi-com-cores.png" alt="alt text" title="Title"></p>
<p><strong>Como reproduzir?</strong></p>
<blockquote>
<ol>
<li>Certifique-se de ter o Python instalado em sua máquina, juntamente com a biblioteca OpenCV (<code>pip install opencv-python</code>).</li>
<li>Salve a imagem <code>messi5.jpg</code> no mesmo diretório do script Python.</li>
<li>Crie um arquivo Python com o seguinte código:</li>
</ol>
</blockquote>
<pre><code class="language-python"> <span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
 <span class="hljs-keyword">import</span> cv2 <span class="hljs-keyword">as</span> cv

 img = cv.imread(<span class="hljs-string">&#x27;messi5.jpg&#x27;</span>,cv.IMREAD_COLOR_BGR)
 cv.imshow(<span class="hljs-string">&#x27;image&#x27;</span>,img)
 k = cv.waitKey(<span class="hljs-number">0</span>)
 <span class="hljs-keyword">if</span> k == <span class="hljs-number">27</span>:         <span class="hljs-comment"># wait for ESC key to exit</span>
     cv.destroyAllWindows()
 <span class="hljs-keyword">elif</span> k == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;s&#x27;</span>): <span class="hljs-comment"># wait for &#x27;s&#x27; key to save and exit</span>
     cv.imwrite(<span class="hljs-string">&#x27;messigray.png&#x27;</span>,img)
     cv.destroyAllWindows()
</code></pre>
<blockquote>
<ol start="4">
<li>Execute o script e observe a imagem colorida sendo exibida na janela.</li>
</ol>
</blockquote>
<hr>
<p><strong>(B) Leitura de vídeo em arquivo</strong></p>
<blockquote>
<p>A velocidade de exibição do vídeo, ou seja, a velocidade com que os frames são exibidos na tela depende do tempo de espera entre a exibição de cada frame, controlado pela linha <code>time.sleep(1/25.0)</code> (simula um atraso de 40ms).</p>
</blockquote>
<blockquote>
<p>Para aumentar a velocidade, basta diminuir o tempo de espera através de um acréscimo no valor do denomidador. Por exemplo, se quisermos aumentar para 50fps, basta fazer a seguinte alteração:</p>
</blockquote>
<pre><code class="language-python">time.sleep(<span class="hljs-number">1</span>/<span class="hljs-number">50.0</span>)
</code></pre>
<blockquote>
<p>Para reduzir a velocidade, basta aumentar o tempo de espera. Por exemplo, se quisermos diminuir para 10fps, basta fazer a seguinte alteração:</p>
</blockquote>
<pre><code class="language-python">time.sleep(<span class="hljs-number">1</span>/<span class="hljs-number">10.0</span>)
</code></pre>
<p><strong>Como reproduzir?</strong></p>
<blockquote>
<ol>
<li>Certifique-se de ter o Python e a biblioteca OpenCV instalados.</li>
<li>Salve o vídeo que deseja exibir no mesmo diretório do script Python.</li>
<li>Crie um arquivo Python com o seguinte código:</li>
</ol>
</blockquote>
<pre><code class="language-python"> <span class="hljs-keyword">import</span> time
 <span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
 <span class="hljs-keyword">import</span> cv2 <span class="hljs-keyword">as</span> cv

 cap = cv.VideoCapture(<span class="hljs-string">&#x27;big_buck_bunny.mp4&#x27;</span>)

 <span class="hljs-keyword">while</span>(cap.isOpened()):
     ret, frame = cap.read()
     
     <span class="hljs-keyword">if</span> ret==<span class="hljs-literal">True</span>:
         <span class="hljs-comment"># show the frame</span>
         cv.imshow(<span class="hljs-string">&#x27;frame&#x27;</span>,frame)

         <span class="hljs-comment">#wait next frame by 40ms - 25fps</span>
         time.sleep(<span class="hljs-number">1</span>/<span class="hljs-number">25.0</span>) 
         
         <span class="hljs-keyword">if</span> cv.waitKey(<span class="hljs-number">1</span>) &amp; <span class="hljs-number">0xFF</span> == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;q&#x27;</span>):
             <span class="hljs-keyword">break</span>
     <span class="hljs-keyword">else</span>:
         <span class="hljs-keyword">break</span>
               
 cap.release()
 cv.destroyAllWindows()
</code></pre>
<blockquote>
<ol start="4">
<li>Substitua <code>'big_buck_bunny.mp4'</code> pelo nome do arquivo de vídeo.</li>
<li>Ajuste o valor de <code>time.sleep()</code> para alterar a velocidade de exibição do vídeo.</li>
<li>Execute o script e observe o vídeo sendo exibido na janela.</li>
</ol>
</blockquote>
<hr>
<p><strong>(C) Leitura de imagem de câmera</strong></p>
<blockquote>
<p>Para salvar o frame ao pressionar a tecla 'x', basta adicionar o seguinte comando:</p>
</blockquote>
<pre><code class="language-python"><span class="hljs-keyword">if</span> key == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;x&#x27;</span>):
    cv.imwrite(<span class="hljs-string">&#x27;foto1.png&#x27;</span>, frame)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Frame saved as &#x27;foto1.png&#x27;&quot;</span>)
</code></pre>
<p><strong>Como reproduzir?</strong></p>
<blockquote>
<ol>
<li>Certifique-se de ter uma câmera conectada ao computador.</li>
<li>Crie um arquivo Python com o seguinte código:</li>
</ol>
</blockquote>
<pre><code class="language-python"> <span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
 <span class="hljs-keyword">import</span> cv2 <span class="hljs-keyword">as</span> cv

 cap = cv.VideoCapture(<span class="hljs-number">2</span>)

 <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> cap.isOpened():
     <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Cannot open camera&quot;</span>)
     exit()
     
 <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
     <span class="hljs-comment"># Capture frame-by-frame</span>
     ret, frame = cap.read()
     <span class="hljs-comment"># if frame is read correctly ret is True</span>
     <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ret:
         <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Can&#x27;t receive frame (stream end?). Exiting ...&quot;</span>)
         <span class="hljs-keyword">break</span>
     
     <span class="hljs-comment"># Display the resulting frame</span>
     cv.imshow(<span class="hljs-string">&#x27;frame&#x27;</span>, frame)
     
     key = cv.waitKey(<span class="hljs-number">1</span>)
     
     <span class="hljs-comment"># Save then frame when &#x27;x&#x27; is pressed</span>
     <span class="hljs-keyword">if</span> key == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;x&#x27;</span>):
         cv.imwrite(<span class="hljs-string">&#x27;foto1.png&#x27;</span>, frame)
         <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Frame saved as &#x27;foto1.png&#x27;&quot;</span>)
         
     <span class="hljs-comment"># Break the loop when &#x27;q&#x27; is pressed</span>
     <span class="hljs-keyword">if</span> key == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;q&#x27;</span>):
         <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Exiting...&quot;</span>)
         <span class="hljs-keyword">break</span>

 <span class="hljs-comment"># When everything done, release the capture</span>
 cap.release()
 cv.destroyAllWindows()
</code></pre>
<blockquote>
<ol start="3">
<li>Execute o script e pressione 'x' para salvar o frame ou 'q' para sair.</li>
<li>A imagem será salva como <code>foto1.png</code> no mesmo diretório do script.</li>
</ol>
</blockquote>
<hr>
<p><strong>(D) Gravação de vídeo da câmera</strong></p>
<blockquote>
<p>Para que a saída do vídeo esteja &quot;normal&quot;, ou seja, sem a inversão vertical e com uma velocidade adequada, basta remover o comando <code>cv.flip(frame, 0)</code> que inverte a imagem verticalmente e ajustar o valor da variável <code>fps</code> para um valor mais alto, como <code>60.0</code>, que é uma taxa de quadros comum para vídeos.</p>
</blockquote>
<p><strong>Como reproduzir?</strong></p>
<blockquote>
<ol>
<li>Certifique-se de ter uma câmera conectada ao computador.</li>
<li>Crie um arquivo Python com o seguinte código:</li>
</ol>
</blockquote>
<pre><code class="language-python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> cv2 <span class="hljs-keyword">as</span> cv

cap = cv.VideoCapture(<span class="hljs-number">2</span>)

<span class="hljs-comment"># Get current width of frame</span>
width = cap.get(cv.CAP_PROP_FRAME_WIDTH)   <span class="hljs-comment"># float</span>
<span class="hljs-comment"># Get current height of frame</span>
height = cap.get(cv.CAP_PROP_FRAME_HEIGHT) <span class="hljs-comment"># float</span>
<span class="hljs-comment"># Define Video Frame Rate in fps</span>
fps = <span class="hljs-number">60.0</span>

<span class="hljs-comment"># Define the codec and create VideoWriter object</span>
fourcc = cv.VideoWriter_fourcc(*<span class="hljs-string">&#x27;XVID&#x27;</span>)
out = cv.VideoWriter(<span class="hljs-string">&#x27;saida.avi&#x27;</span>, fourcc, fps, (<span class="hljs-built_in">int</span>(width),<span class="hljs-built_in">int</span>(height)) )

<span class="hljs-keyword">while</span> cap.isOpened():
 ret, frame = cap.read()
 <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ret:
     <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Can&#x27;t receive frame (stream end?). Exiting ...&quot;</span>)
     <span class="hljs-keyword">break</span>
 <span class="hljs-comment"># write the flipped frame</span>
 out.write(frame)
 cv.imshow(<span class="hljs-string">&#x27;frame&#x27;</span>, frame)
 <span class="hljs-keyword">if</span> cv.waitKey(<span class="hljs-number">1</span>) == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;q&#x27;</span>):
     <span class="hljs-keyword">break</span>

<span class="hljs-comment"># Release everything if job is finished</span>
cap.release()
out.release()
cv.destroyAllWindows()
</code></pre>
<blockquote>
<ol start="3">
<li>Execute o script e pressione 'q' para encerrar a gravação.</li>
<li>O vídeo será salvo como <code>saida.avi</code> no mesmo diretório do script.</li>
</ol>
</blockquote>
<hr>
<p><strong>Responda: se for necessário alterar a imagem, ou seja realizando alguma operação de procesamento nela, em que ponto dos quatro programas estudados isso deve ser realizado?</strong></p>
<blockquote>
<p>As operações de processamento de imagem devem ser realizadas após a leitura da imagem ou do frame do vídeo, mas antes de exibi-los ou salvá-los.</p>
</blockquote>
<hr>
<h3 id="parte-2-obtenção-de-fotos-e-vídeos">PARTE 2: Obtenção de Fotos e Vídeos</h3>
<p><strong>(A) Obtenção de foto da equipe</strong></p>
<img src="file:////home/ufabc/Documentos/projeto/cv2025.2-grupo8-icpg/relatorios/lab_1/foto1.png" width="320" height="240">
<p><strong>(B) Foto Avatar da equipe</strong></p>
<p><strong>(C) Vídeos com pessoas e com objeto</strong></p>
<blockquote>
<p>O seguinte vídeo foi gravado com uma pessoa realizando movimentos rápidos com as mãos:</p>
</blockquote>
<video width="320" height="240" controls>
  <source src="./video-pessoa-rapido.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
<blockquote>
<p>O seguinte vídeo foi gravado com uma pessoa realizando movimentos lentos com as mãos:</p>
</blockquote>
<video width="320" height="240" controls>
  <source src="./video_pessoa_lento.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
<blockquote>
<p>O seguinte vídeo foi gravado com um objeto (uma garrafa) realizando movimentos rápidos:</p>
</blockquote>
<video width="320" height="240" controls>
  <source src="./objeto_rapido_garrafa.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
<blockquote>
<p>O seguinte vídeo foi gravado com um objeto (uma garrafa) realizando movimentos lentos:</p>
</blockquote>
<video width="320" height="240" controls>
  <source src="./objeto_lento_garrafa.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
<hr>
<h3 id="análise">Análise</h3>
<p>Neste laboratório, o foco foi a captura e manipulação de imagens e vídeos utilizando a biblioteca OpenCV. Ao longo dos experimentos, foi abordado diversos aspectos práticos que envolveram a leitura, exibição, gravação e processamento básico de arquivos de imagem e vídeo. E cada etapa contribuiu para uma melhor compreensão das funções da OpenCV e da também a interação com arquivos de mídia.</p>
<p>Na parte de processamento de imagens e vídeos, foi possível realizar ajustes fundamentais nos scripts do roteiro, como a leitura de imagens em diferentes formatos, alteração da taxa de quadros (FPS) em vídeos e a captura de frames em tempo real de uma câmera. A experimentação com a manipulação de vídeos mostrou a importância de controlar a taxa de quadros, que impacta diretamente na fluidez, sendo possível ajustar a velocidade de reprodução com base em configurações como time.sleep() pra controlar a captura de novos frames. E também foi possível realizar a inversão vertical dos frames com uma correção pela simples remoção do comando cv.flip().</p>
<p>A parte prática do laboratório foi um exercício de aplicação de conceitos teóricos, como a manipulação de objetos do tipo cv.VideoCapture e cv.VideoWriter para capturar e salvar vídeos. Além disso, os experimentos envolvendo movimentos rápidos e lentos mostraram as diferenças na captura e na percepção do movimento, enfatizando a importância de um bom controle da taxa de quadros para capturar detalhes em vídeos com movimentos rápidos.</p>
<h3 id="conclusão">Conclusão</h3>
<p>Por fim, este laboratório permitiu a aplicação prática de conceitos de Visão Computacional relacionados à captura, exibição, gravação e processamento básico de imagens e vídeos. Através dos experimentos que foram realizados, e assim foi possível observar os efeitos da taxa de quadros na reprodução de vídeos e como ajustes simples no código podem alterar significativamente a qualidade da captura e exibição das imagens e vídeos.</p>
<p>A experiência também revelou a importância de entender a arquitetura e os parâmetros da OpenCV, como o controle do FPS, a leitura de arquivos e a gravação em tempo real.</p>
<p>Essas atividades foram fundamentais para o desenvolvimento de habilidades e analise no âmbito de Visão Computacional e abrem portas para experimentos mais complexos, como o processamento de vídeos em tempo real, detecção de objetos e movimento, e outros algoritmos aplicados a fluxos de imagens e vídeos. A experiência prática, aliada ao conhecimento teórico adquirido, fortalece a base necessária para projetos futuros na área.</p>
<hr>
<h3 id="referências">REFERÊNCIAS</h3>
<ul>
<li>OpenCV Documentation: <a href="https://docs.opencv.org/">https://docs.opencv.org/</a></li>
<li>OpenCV Python Tutorials: <a href="https://opencv-python-tutroals.readthedocs.io">https://opencv-python-tutroals.readthedocs.io</a></li>
</ul>

            
            
        </body>
        </html>